{
  "content_hash": "b04e8121c80797f75a64e7ec06bf05bedde151a5135ff37d5fe767e27e8d8707",
  "share_id": "tbrgz3",
  "title": "The ‘brownie recipe problem’: why LLMs must have fine-grained context to deliver real-time results",
  "optimized_headline": "The ‘brownie recipe problem’: why LLMs must have fine-grained context to deliver real-time results",
  "url": "https://venturebeat.com/orchestration/the-brownie-recipe-problem-why-llms-must-have-fine-grained-context-to",
  "source": "VentureBeat",
  "published_at": "2026-02-04T21:04:00.000Z",
  "raw_excerpt": "Today’s LLMs excel at reasoning, but can still struggle with context. This is particularly true in real-time ordering systems like Instacart. \nInstacart CTO Anirban Kundu calls it the \"brownie recipe problem.\" \nIt's not as simple as telling an LLM ‘I want to make brownies.’ To be truly assistive when planning the meal, the model must go beyond that simple directive to understand what’s available i",
  "raw_body": "Today’s LLMs excel at reasoning, but can still struggle with context. This is particularly true in real-time ordering systems like Instacart. \nInstacart CTO Anirban Kundu calls it the \"brownie recipe problem.\" \nIt's not as simple as telling an LLM ‘I want to make brownies.’ To be truly assistive when planning the meal, the model must go beyond that simple directive to understand what’s available in the user’s market based on their preferences — say, organic eggs versus regular eggs — and factor that into what’s deliverable in their geography so food doesn’t spoil. This among other critical factors. \nFor Instacart, the challenge is juggling latency with the right mix of context to provide experiences in, ideally, less than one second’s time. \n“If reasoning itself takes 15 seconds, and if every interaction is that slow, you're gonna lose the user,” Kundu said at a recent VB event. \nMixing reasoning, real-world state, personalization\nIn grocery delivery, there’s a “world of reasoning” and a “world of state” (what’s available in the real world), Kundu noted, both of which must be understood by an LLM along with user preference. But it’s not as simple as loading the entirety of a user’s purchase history and known interests into a reasoning model. \n“Your LLM is gonna blow up into a size that will be unmanageable,” said Kundu. \nTo get around this, Instacart splits processing into chunks. First, data is fed into a large foundational model that can understand intent and categorize products. That processed data is then routed to small language models (SLMs) designed for catalog context (the types of food or other items that work together) and semantic understanding. \nIn the case of catalog context, the SLM must be able to process multiple levels of details around the order itself as well as the different products. For instance, what products go together and what are their relevant replacements if the first choice isn't in stock? These substitutions are “very, very important” for a company like Instacart, which Kundu said has “over double digit cases” where a product isn’t available in a local market. \nIn terms of semantic understanding, say a shopper is looking to buy healthy snacks for children. The model needs to understand what a healthy snack is and what foods are appropriate for, and appeal to, an 8 year old, then identify relevant products. And, when those particular products aren’t available in a given market, the model has to also find related subsets of products. \nThen there’s the logistical element. For example, a product like ice cream melts quickly, and frozen vegetables also don’t fare well when left out in warmer temperatures. The model must have this context and calculate an acceptable deliverability time. \n“So you have this intent understanding, you have this categorization, then you have this other portion about logistically, how do you do it?”, Kundu noted. \nAvoiding 'monolithic' agent systems\nLike many other companies, Instacart is experimenting with AI agents, finding that a mix of agents works better than a “single monolith” that does multiple different tasks. The Unix philosophy of a modular operating system with smaller, focused tools helps address different payment systems, for instance, that have varying failure modes, Kundu explained. \n“Having to build all of that within a single environment was very unwieldy,” he said. Further, agents on the back end talk to many third-party platforms, including point-of-sale (POS) and catalog systems. Naturally, not all of them behave the same way; some are more reliable than others, and they have different update intervals and feeds. \n“So being able to handle all of those things, we've gone down this route of microagents rather than agents that are dominantly large in nature,” said Kundu. \nTo manage agents, Instacart has integrated with OpenAI’s model context protocol (MCP), which standardizes and simplifies the process of connecting AI models to different tools and data sources. \nThe company also uses Google’s Universal Commerce Protocol (UCP) open standard, which allows AI agents to directly interact with merchant systems. \nHowever, Kundu's team still deals with challenges. As he noted, it's not about whether integration is possible, but how reliably those integrations behave and how well they're understood by users. Discovery can be difficult, not just in identifying available services, but understanding which ones are appropriate for which task.\nInstacart has had to implement MCP and UCP in “very different” cases, and the biggest problems they’ve run into are failure modes and latency, Kundu noted. “The response times and understandings of both of those services are very, very different I would say we spend probably two thirds of the time fixing those error cases.”",
  "category": "capabilities_and_how",
  "category_confidence": "medium",
  "speedrun": "Instacart's CTO, Anirban Kundu, highlighted the 'brownie recipe problem' facing LLMs in real-time systems. These models excel at reasoning but struggle with context, particularly in grocery delivery. For instance, the system must account for user preferences and local availability to avoid wasted food. This is crucial because if reasoning takes too long, users may abandon the service, making speed and accuracy essential now more than ever.",
  "why_it_matters": [
    "Grocery shoppers could benefit from more personalized and efficient recommendations based on local inventory and preferences.",
    "This highlights a broader trend in AI, where companies are moving towards modular systems that enhance performance and reliability."
  ],
  "lenses": {
    "eli12": "Instacart's approach shows that AI needs more than just smart reasoning; it requires context to be truly helpful. Think of it like a chef who not only knows recipes but also what's in the pantry. This matters because better AI could make shopping easier and reduce food waste.",
    "pm": "For product managers, this emphasizes the need for AI solutions that balance reasoning with real-world context. By focusing on user preferences and local availability, they could enhance user satisfaction and reduce operational inefficiencies, ultimately leading to better retention.",
    "engineer": "Technically, Instacart uses a layered approach with a large foundational model for intent understanding and smaller language models for context-specific tasks. This method helps manage complexity and latency, essential in delivering timely and relevant results. However, challenges remain in ensuring reliable integrations and managing varying response times across different systems."
  },
  "hype_meter": 3,
  "model_meta": {
    "model": "gpt-4o-mini",
    "prompt_version": "v2.1"
  },
  "created_at": "2026-02-05T05:05:05.520Z",
  "updated_at": "2026-02-05T05:05:05.520Z",
  "processing_order": 1770267905520
}